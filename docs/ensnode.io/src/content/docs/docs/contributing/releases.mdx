---
title: Contributing to Releases
sidebar:
  label: Releases
  order: 3
---

import { LinkCard } from '@astrojs/starlight/components';

We use [changesets](https://github.com/changesets/changesets) to manage version bumps and release notes for our NPM packages and Docker images (ENSIndexer, ENSAdmin, and ENSRainbow).

## Adding a Changeset to Your PR

When you open a PR with feature or bug fix changes, you'll need to include a changeset file that documents your changes:

1. Run `changeset` or `pnpm changeset` in the repository root
2. Select the packages/apps your changes affect using the interactive prompt
3. Choose whether your changes are "major" (breaking changes), "minor" (features), or "patch" (bug fixes).
4. Write a clear description of your changes - this will appear in the release notes

The `changesets/bot` will automatically comment on your PR to either remind you to add a changeset or confirm the version changes that will happen when your PR is merged.

**Important notes:**
- Changesets are only required for user-facing changes (features, bug fixes)
- You don't need a changeset for documentation changes or internal refactoring
- All our packages use "fixed" versioning - they all share the same version number regardless of which package triggered the version bump

## Upon a New Release

Upon the publishing of a new release, your change will be included in the produced packages/images and your contributions will be referenced in the GitHub Release notes.

## Previews for Releases

There are curently two separate flows for previewing a release: Release Snapshots and Release Previews.

### Release Snapshot

Each commit to `main` will trigger the `snapshot-release.yml` workflow to build and publish packages to NPM and Docker images to the GitHub Container Registry (ghcr). These public releases will be under the tag `@next`, allowing anyone to use the npm packages or docker images associated with each commit to main. To install snapshot releases run `pnpm install @ensnode/package-name@next` or `docker run ghcr.io/namehash/ensnode:next`. If the `@latest` tag is used then it will only install or run the latest stable release.

**Important notes:**
- Release snapshots are automatic and cannot be triggered manually.
- Release snapshots are considered a preview of what will come in a stable release, so there may be unforeseen side effects or bugs that have not been addressed yet.

### Release Preview

To manually trigger a preview release for a branch that has not been merged to `main`, follow these steps:

1. Navigate to [Actions > Release Preview](https://github.com/namehash/ensnode/actions/workflows/preview-release.yml)
2. Click "Run workflow" and select from the following options:
 - Which branch you would like to run the preview release workflow on, ideally the branch for an open PR. The workflow needs a target branch to build and publish for.
 - Choose whether to build and publish only NPM packages, or to build and publish both NPM packages and Docker images to the GitHub Container Registry (ghcr).
 - (Optional) Provide a custom suffix for the preview release package tag. For example, if you had a branch called `feat/add-api-route` and left this custom suffix field blank, the preview release would be `@ensnode/package-name@preview-feat-add-api-route`. If you fill in the custom suffix field with `users-route` then the resulting package name would be `@ensnode/package-name@preview-users-route`.
3. Install preview packages with: `npm install @ensnode/package-name@preview-branch-name`. 

**Important notes:**
- Release previews can only be triggered by authorized NameHash team members.
- Release previews are ephemeral and don't create commits or modify the repository.
- Release previews are built off branches that are still under active development. There may be unforeseen side effects or bugs that have not been fixed yet.
- No GitHub releases or tags are created for Preview Releases.
