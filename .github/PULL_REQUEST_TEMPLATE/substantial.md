# Substantial PR

> Use this template for PRs that introduce significant changes.
>
> This template exists to keep reviewers from reverse-engineering context, risk, and intent from the diff.
>
> If filling this out feels heavy, that's usually a sign the PR is too large or still half-baked.
>
> Reviewers may block, close, or ask for this PR to be split if it's hard to reason about as a single unit.

---

## Reviewer Focus (Read This First)

<details>
<summary>What reviewers should focus on</summary>

Where should reviewers spend most of their time?

Call out:
- The risky or non-obvious parts
- Areas where you're least confident
- The kind of feedback you actually want

If your answer is "everything," explain why targeted review isn't possible.

Limit this to 1-3 areas.

</details>

---

## Problem & Motivation

<details>
<summary>Why this exists</summary>

Explain:
- What problem this PR is solving
- What's broken, fragile, or getting worse without it
- Why this change is happening *now*
- Links to issues, incidents, or prior discussion

Keep this tight. Bullets are fine.

</details>

---

## What Changed (Concrete)

<details>
<summary>What actually changed</summary>

List the concrete behavioral or structural changes in this PR.

This should be a factual inventory, not a narrative.
Prefer numbered bullets.

If this list starts getting long, that's a signal the PR may need splitting.

</details>

---

## Design & Planning

<details>
<summary>How this approach was chosen</summary>

- Link any design docs or notes that existed before or during implementation
- If this didn't warrant upfront design, say why
- Mention the most realistic alternatives you considered and why you didn't take them
- If planning was lightweight, be explicit about that

</details>

- Planning artifacts:
- Reviewed / approved by (only if there was a real review):

---

## Self-Review

<details>
<summary>What you caught yourself</summary>

Describe what changed *after* you reviewed your own diff end-to-end.

This is not optional.

</details>

- Bugs caught:
- Logic simplified:
- Naming / terminology improved:
- Dead or unnecessary code removed (or why none was):

---

## Cross-Codebase Alignment

<details>
<summary>Related code you checked</summary>

Show that you looked beyond just the files in this PR.

- Terms you searched for to find related code or docs
- Files or packages you reviewed but intentionally didn't change
- Areas you left alone on purpose (and why)

Focus on directly related domains. Don't boil the ocean.

</details>

- Search terms used:
- Reviewed but unchanged:
- Deferred alignment (with rationale):

---

## Downstream & Consumer Impact

<details>
<summary>Who this affects and how</summary>

Explain how this change impacts:
- Callers
- Readers
- Operators
- Future maintainers

Call out:
- Terminology or concepts that might confuse someone new
- What you changed to reduce that confusion

Point to actual diffs where possible.

</details>

- Public APIs affected:
- Docs updated:
- Naming decisions worth calling out:

---

## Testing Evidence

<details>
<summary>How this was validated</summary>

Explain:
- How this was tested locally and/or in CI
- What important behavior is *not* covered by tests
- If this is wrong, what breaks first

</details>

- Testing performed:
- Known gaps:
- What reviewers have to reason about manually (and why):

---

## Scope Reductions

<details>
<summary>What you intentionally didn't do</summary>

List follow-ups you identified but explicitly deferred to keep this PR reviewable.

Link issues where applicable and explain the tradeoffs.

</details>

- Follow-ups:
- Why they were deferred:

---

## Risk Analysis

<details>
<summary>How this could go wrong</summary>

Call out:
- Assumptions this PR relies on
- Likely failure modes
- Blast radius if it breaks

</details>

- Risk areas:
- Mitigations or rollback options:
- Named owner if this causes problems:

---

## Pre-Review Checklist (Blocking)

- [ ] I reviewed every line of this diff and understand it end-to-end
- [ ] I'm prepared to defend this PR line-by-line in review
- [ ] I'm comfortable being the on-call owner for this change
- [ ] Relevant changesets are included (or are not required)
  - *Tip: [Changesets](https://ensnode.io/docs/contributing/releases/#adding-a-changeset-to-your-pr) should be created / written to optimize for the narrative of the next autogenerated [release notes](https://github.com/namehash/ensnode/releases).*
